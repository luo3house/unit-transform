{"version":3,"file":"unit-transform.js","names":["formatDecimal","createUnitTransfer","options","scale","unit","transfer","formatScale","anyTemp","isC","isF","c2val","c","Math","floor","val2c","parseFloat","parseInt","c2f","f2c","f","val2cf","val","c2cf","f2cf","cf2c","cORf","cf2f","cf2val","tempUnitString","displayTempByC","displayTempByVal"],"sources":["../../src/unit-transform.ts"],"sourcesContent":["import { formatDecimal } from './utils'\n\ntype TransferOptions = {\n  /**\n   * 端点传输倍数，即保留N位小数\n   * @example 端点值 56，传输倍数 0，则界面应显示 56\n   * @example 端点值 103，传输倍数 1，则界面应显示 10.3\n   */\n  scale?: number\n  /**\n   * 温标\n   */\n  unit: 'c' | 'f'\n}\n\nexport function createUnitTransfer(options: TransferOptions) {\n  const scale = options.scale ?? 0\n  const unit = options.unit\n  const transfer = {\n    formatScale: (anyTemp: number) => formatDecimal(anyTemp, scale),\n    isC: () => unit === 'c',\n    isF: () => unit === 'f',\n    c2val: (c: number) => Math.floor(transfer.formatScale(c) * 10 ** scale),\n    val2c: (c: number | any) =>\n      transfer.formatScale(parseFloat(`${parseInt(`${c}`, 10) / 10 ** scale}`)),\n    c2f: (c: number) =>\n      transfer.formatScale(parseFloat(`${parseFloat(`${c * 1.8 + 32}`)}`)),\n    f2c: (f: number) =>\n      transfer.formatScale(parseFloat(`${parseFloat(`${(f - 32) / 1.8}`)}`)),\n    val2cf: (val: number) => transfer.c2cf(transfer.val2c(val)),\n    c2cf: (c: number) =>\n      unit === 'c' ? transfer.formatScale(c) : transfer.c2f(c),\n    f2cf: (f: number) =>\n      unit === 'f' ? transfer.formatScale(f) : transfer.f2c(f),\n    cf2c: (cORf: number) =>\n      unit === 'c' ? transfer.formatScale(cORf) : transfer.f2c(cORf),\n    cf2f: (cORf: number) =>\n      unit === 'f' ? transfer.formatScale(cORf) : transfer.c2f(cORf),\n    cf2val: (cORf: number) =>\n      unit === 'c' ? transfer.c2val(cORf) : transfer.c2val(transfer.f2c(cORf)),\n    tempUnitString: () => (unit === 'c' ? '℃' : '℉'),\n    displayTempByC: (c: number) =>\n      `${transfer.c2cf(c)} ${transfer.tempUnitString()}`,\n    displayTempByVal: (val: number) =>\n      transfer.displayTempByC(transfer.val2c(val)),\n  }\n  return transfer\n}\n"],"mappings":"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"}