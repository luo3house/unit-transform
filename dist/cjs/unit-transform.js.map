{"version":3,"file":"unit-transform.js","names":["createUnitTransform","options","scale","unit","transform","formatScale","anyTemp","formatDecimal","isC","isF","c2val","c","Math","floor","val2c","parseFloat","parseInt","c2f","f2c","f","val2cf","val","c2cf","f2cf","cf2c","cORf","cf2f","cf2val","tempUnitString","displayTempByC","displayTempByVal"],"sources":["../../src/unit-transform.ts"],"sourcesContent":["import { formatDecimal } from './utils'\n\ntype TransformOptions = {\n  /**\n   * 端点传输倍数，即保留N位小数\n   * @example 端点值 56，传输倍数 0，则界面应显示 56\n   * @example 端点值 103，传输倍数 1，则界面应显示 10.3\n   */\n  scale?: number\n  /**\n   * 温标\n   */\n  unit: 'c' | 'f'\n}\n\nexport function createUnitTransform(options: TransformOptions) {\n  const scale = options.scale ?? 0\n  const unit = options.unit\n  const transform = {\n    formatScale: (anyTemp: number) => formatDecimal(anyTemp, scale),\n    isC: () => unit === 'c',\n    isF: () => unit === 'f',\n    c2val: (c: number) => Math.floor(transform.formatScale(c) * 10 ** scale),\n    val2c: (c: number | any) =>\n      transform.formatScale(\n        parseFloat(`${parseInt(`${c}`, 10) / 10 ** scale}`)\n      ),\n    c2f: (c: number) =>\n      transform.formatScale(parseFloat(`${parseFloat(`${c * 1.8 + 32}`)}`)),\n    f2c: (f: number) =>\n      transform.formatScale(parseFloat(`${parseFloat(`${(f - 32) / 1.8}`)}`)),\n    val2cf: (val: number) => transform.c2cf(transform.val2c(val)),\n    c2cf: (c: number) =>\n      unit === 'c' ? transform.formatScale(c) : transform.c2f(c),\n    f2cf: (f: number) =>\n      unit === 'f' ? transform.formatScale(f) : transform.f2c(f),\n    cf2c: (cORf: number) =>\n      unit === 'c' ? transform.formatScale(cORf) : transform.f2c(cORf),\n    cf2f: (cORf: number) =>\n      unit === 'f' ? transform.formatScale(cORf) : transform.c2f(cORf),\n    cf2val: (cORf: number) =>\n      unit === 'c'\n        ? transform.c2val(cORf)\n        : transform.c2val(transform.f2c(cORf)),\n    tempUnitString: () => (unit === 'c' ? '℃' : '℉'),\n    displayTempByC: (c: number) =>\n      `${transform.c2cf(c)} ${transform.tempUnitString()}`,\n    displayTempByVal: (val: number) =>\n      transform.displayTempByC(transform.val2c(val)),\n  }\n  return transform\n}\n"],"mappings":"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"}