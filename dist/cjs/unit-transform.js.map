{"version":3,"file":"unit-transform.js","names":["createUnitTransfer","options","scale","unit","transfer","formatScale","anyTemp","formatDecimal","isC","isF","c2val","c","Math","floor","val2c","parseFloat","parseInt","c2f","f2c","f","val2cf","val","c2cf","f2cf","cf2c","cORf","cf2f","cf2val","tempUnitString","displayTempByC","displayTempByVal"],"sources":["../../src/unit-transform.ts"],"sourcesContent":["import { formatDecimal } from './utils'\n\ntype TransferOptions = {\n  /**\n   * 端点传输倍数，即保留N位小数\n   * @example 端点值 56，传输倍数 0，则界面应显示 56\n   * @example 端点值 103，传输倍数 1，则界面应显示 10.3\n   */\n  scale?: number\n  /**\n   * 温标\n   */\n  unit: 'c' | 'f'\n}\n\nexport function createUnitTransfer(options: TransferOptions) {\n  const scale = options.scale ?? 0\n  const unit = options.unit\n  const transfer = {\n    formatScale: (anyTemp: number) => formatDecimal(anyTemp, scale),\n    isC: () => unit === 'c',\n    isF: () => unit === 'f',\n    c2val: (c: number) => Math.floor(transfer.formatScale(c) * 10 ** scale),\n    val2c: (c: number | any) =>\n      transfer.formatScale(parseFloat(`${parseInt(`${c}`, 10) / 10 ** scale}`)),\n    c2f: (c: number) =>\n      transfer.formatScale(parseFloat(`${parseFloat(`${c * 1.8 + 32}`)}`)),\n    f2c: (f: number) =>\n      transfer.formatScale(parseFloat(`${parseFloat(`${(f - 32) / 1.8}`)}`)),\n    val2cf: (val: number) => transfer.c2cf(transfer.val2c(val)),\n    c2cf: (c: number) =>\n      unit === 'c' ? transfer.formatScale(c) : transfer.c2f(c),\n    f2cf: (f: number) =>\n      unit === 'f' ? transfer.formatScale(f) : transfer.f2c(f),\n    cf2c: (cORf: number) =>\n      unit === 'c' ? transfer.formatScale(cORf) : transfer.f2c(cORf),\n    cf2f: (cORf: number) =>\n      unit === 'f' ? transfer.formatScale(cORf) : transfer.c2f(cORf),\n    cf2val: (cORf: number) =>\n      unit === 'c' ? transfer.c2val(cORf) : transfer.c2val(transfer.f2c(cORf)),\n    tempUnitString: () => (unit === 'c' ? '℃' : '℉'),\n    displayTempByC: (c: number) =>\n      `${transfer.c2cf(c)} ${transfer.tempUnitString()}`,\n    displayTempByVal: (val: number) =>\n      transfer.displayTempByC(transfer.val2c(val)),\n  }\n  return transfer\n}\n"],"mappings":"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"}